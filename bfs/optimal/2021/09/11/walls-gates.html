<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Walls and gates - Breadth first search | Coding challenges</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Walls and gates - Breadth first search" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Keeping my coding skills sharp." />
<meta property="og:description" content="Keeping my coding skills sharp." />
<link rel="canonical" href="https://archanakalburgi.github.io/code_challenges/bfs/optimal/2021/09/11/walls-gates.html" />
<meta property="og:url" content="https://archanakalburgi.github.io/code_challenges/bfs/optimal/2021/09/11/walls-gates.html" />
<meta property="og:site_name" content="Coding challenges" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-11T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Walls and gates - Breadth first search" />
<script type="application/ld+json">
{"url":"https://archanakalburgi.github.io/code_challenges/bfs/optimal/2021/09/11/walls-gates.html","@type":"BlogPosting","headline":"Walls and gates - Breadth first search","dateModified":"2021-09-11T00:00:00-05:00","datePublished":"2021-09-11T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://archanakalburgi.github.io/code_challenges/bfs/optimal/2021/09/11/walls-gates.html"},"description":"Keeping my coding skills sharp.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/code_challenges/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://archanakalburgi.github.io/code_challenges/feed.xml" title="Coding challenges" /><link rel="shortcut icon" type="image/x-icon" href="/code_challenges/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><style>
@import url('https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&display=swap');
  .site-title{
    color: #006ad1;
    font-family: 'Mochiy Pop One', sans-serif;
    font-weight: 500;
    font-size: 40px;
  }
</style>
<header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/code_challenges/">Coding challenges</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/code_challenges/about/">About Me</a><a class="page-link" href="/code_challenges/_pages/back_to_tuktuk.html">Back to Tuktuk</a><a class="page-link" href="/code_challenges/search/">Search</a><a class="page-link" href="/code_challenges/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Walls and gates - Breadth first search</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-09-11T00:00:00-05:00" itemprop="datePublished">
        Sep 11, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/code_challenges/categories/#bfs">bfs</a>
        &nbsp;
      
        <a class="category-tags-link" href="/code_challenges/categories/#optimal">optimal</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p align="center">
    <img width="560" height="300" src="/images/walls_gates.jpg" />
</p>

<p><a href="https://www.freecodecamp.org/news/coding-explained-in-25-profound-comics-8847ea03819c/">image source</a></p>

<h1 id="problem-statement">Problem statement</h1>

<p>Given a m x n grid rooms initialized with these three possible values.</p>
<ul>
  <li>-1 A wall or an obstacle.</li>
  <li>0 A gate.</li>
  <li>INF Infinity means an empty room. We use the value 2 <sup> 31 </sup> - 1 = 2147483647 to represent INF as you may assume that the distance to a gate is less than 2147483647.</li>
</ul>

<p>Fill each empty room with the distance to its nearest gate. If it is impossible to reach a gate, it should be filled with INF.</p>

<h1 id="understand">Understand</h1>

<p>Example 1:</p>
<p align="center">
  <img width="500" height="200" src="/images/walls_gates_1.jpg" />
</p>

<p>Example 2:</p>
<p align="center">
  <img width="500" height="300" src="/images/walls_gates_2.jpg" />
</p>

<p>Example 3:</p>
<p align="center">
  <img width="600" height="400" src="/images/walls_gates_3.jpg" />
</p>

<h1 id="match-and-plan">Match and plan</h1>

<ul>
  <li>From the gate we have to go to the neighboring cells and mark the cells with the shortest distance from the nearest gate</li>
  <li>This is graph problem where we have to traverse the given matrix and update the values in the cells</li>
  <li>We can traverse the matrix with BFS or DFS way</li>
  <li>I have used BFS to traverse the matrix because we have to find the shortest distance and BFS will help us find the shortest distance</li>
</ul>

<p><strong>Logical steps:</strong></p>

<ul>
  <li>from main function call BFS function</li>
  <li>source cell is the fist cell with value = 0 (gate)</li>
  <li>go to neighbors of the source and change the value of the neighboring cell with minimum(value of cell, distance)</li>
  <li>perform above step only if
    <ol>
      <li>value != -1 (wall)</li>
      <li>value != 0 (gate)</li>
      <li>if cell is not visited</li>
    </ol>
  </li>
</ul>

<p>So the first wo conditions where we are avoiding visiting a cell is the additional conditions we must take care in solving this problem</p>

<h1 id="implement">Implement</h1>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def valid_neighbors<span class="o">(</span>r,c,row,col<span class="o">)</span>:
    valid <span class="o">=</span> <span class="o">[]</span>
    neighbors <span class="o">=</span> <span class="o">[(</span>r,c-1<span class="o">)</span>,<span class="o">(</span>r,c+1<span class="o">)</span>,<span class="o">(</span>r-1,c<span class="o">)</span>,<span class="o">(</span>r+1,c<span class="o">)]</span>
    <span class="k">for</span> <span class="o">(</span>nr,nc<span class="o">)</span> <span class="k">in </span>neighbors:
        <span class="k">if </span>row <span class="o">&gt;</span> nr <span class="o">&gt;=</span> 0 and col <span class="o">&gt;</span> nc <span class="o">&gt;=</span> 0:
            valid.append<span class="o">((</span>nr,nc<span class="o">))</span>
    <span class="k">return </span>valid

def bfs<span class="o">(</span>ro, col, rooms<span class="o">)</span>:
    visited <span class="o">=</span> <span class="nb">set</span><span class="o">()</span>
    queue <span class="o">=</span> <span class="o">[(</span>ro, col<span class="o">)]</span> 
    visited.add<span class="o">((</span>ro,col<span class="o">))</span>
    distance <span class="o">=</span> 0
    
    <span class="k">while </span>queue:
        <span class="k">for </span>_ <span class="k">in </span>range<span class="o">(</span>len<span class="o">(</span>queue<span class="o">))</span>:
            ro, col <span class="o">=</span> queue.pop<span class="o">(</span>0<span class="o">)</span>
            rooms[ro][col] <span class="o">=</span> min<span class="o">(</span>rooms[ro][col], distance<span class="o">)</span>
            <span class="k">for</span> <span class="o">(</span>nr,nc<span class="o">)</span> <span class="k">in </span>valid_neighbors<span class="o">(</span>ro, col, len<span class="o">(</span>rooms<span class="o">)</span>, len<span class="o">(</span>rooms[0]<span class="o">))</span>:
                <span class="k">if</span> <span class="o">(</span>nr,nc<span class="o">)</span> not <span class="k">in </span>visited and rooms[nr][nc] <span class="o">!=</span> <span class="nt">-1</span> and rooms[nr][nc] <span class="o">!=</span> 0:
                    queue.append<span class="o">((</span>nr,nc<span class="o">))</span>
                    visited.add<span class="o">((</span>nr,nc<span class="o">))</span>
        distance +<span class="o">=</span>1

def wallsAndGates<span class="o">(</span>rooms<span class="o">)</span>:
    <span class="k">for </span>row <span class="k">in </span>range<span class="o">(</span>len<span class="o">(</span>rooms<span class="o">))</span>:
        <span class="k">for </span>column <span class="k">in </span>range<span class="o">(</span>len<span class="o">(</span>rooms[0]<span class="o">))</span>:
            <span class="k">if </span>rooms[row][column] <span class="o">==</span> 0:
                bfs<span class="o">(</span>row, column, rooms<span class="o">)</span>
</code></pre></div></div>

<ul>
  <li>After discussing the above implementation with a few of my friends, I found their suggestions regarding implementing the code to get the valid neighbors of a cell helpful and adopted the following, which much easier to understand and read.</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def valid_neighbors<span class="o">(</span>r,c,row,col<span class="o">)</span>:
    valid <span class="o">=</span> <span class="o">[]</span>
    neighbors <span class="o">=</span> <span class="o">[(</span>r,c-1<span class="o">)</span>,<span class="o">(</span>r,c+1<span class="o">)</span>,<span class="o">(</span>r-1,c<span class="o">)</span>,<span class="o">(</span>r+1,c<span class="o">)]</span>
    <span class="k">for</span> <span class="o">(</span>nr,nc<span class="o">)</span> <span class="k">in </span>neighbors:
        <span class="k">if </span>0 &lt;<span class="o">=</span> nr &lt; row and 0 &lt;<span class="o">=</span> nc &lt; col:
            valid.append<span class="o">((</span>nr,nc<span class="o">))</span>
    <span class="k">return </span>valid
</code></pre></div></div>
<p><em>notice something about the “if condition”?</em></p>

<p><strong>Alternatively</strong></p>

<p>one might think of implementing the following logic to update the distance in the cell</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="o">(</span>nr,nc<span class="o">)</span> <span class="k">in </span>valid_neighbors<span class="o">(</span>ro, col, len<span class="o">(</span>rooms<span class="o">)</span>, len<span class="o">(</span>rooms[0]<span class="o">))</span>:
    <span class="k">if </span>rooms[nr][nc] <span class="o">&gt;</span> distance:
        rooms[nr][nc] <span class="o">=</span> distance+1
        queue.append<span class="o">((</span>nr,nc,distance+1<span class="o">))</span>
</code></pre></div></div>

<ul>
  <li>in the above scenario we are not checking if the cells are already visited, instead checking if the values is the cell is greater than distance which works fine but it takes a longer computational time for a much bigger matrix as we are have to visit all the cells</li>
  <li>in order to avoid this we could update the cell with min(rooms[ro][col], distance) and amend our code as follows</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rooms[ro][col] <span class="o">=</span> min<span class="o">(</span>rooms[ro][col], distance<span class="o">)</span>
<span class="k">for</span> <span class="o">(</span>nr,nc<span class="o">)</span> <span class="k">in </span>valid_neighbors<span class="o">(</span>ro, col, len<span class="o">(</span>rooms<span class="o">)</span>, len<span class="o">(</span>rooms[0]<span class="o">))</span>:
    <span class="k">if</span> <span class="o">(</span>nr,nc<span class="o">)</span> not <span class="k">in </span>visited and rooms[nr][nc] <span class="o">!=</span> <span class="nt">-1</span> and rooms[nr][nc] <span class="o">!=</span> 0:
        queue.append<span class="o">((</span>nr,nc<span class="o">))</span>
        visited.add<span class="o">((</span>nr,nc<span class="o">))</span>
distance +<span class="o">=</span>1
</code></pre></div></div>

<h1 id="evaluate">Evaluate</h1>

<p>Complexity</p>
<ul>
  <li>time: O(omg), where o = number of rows, m = number of columns and g = number of gates
    <ul>
      <li>BFS takes m*n steps to reach a all rooms a gate</li>
      <li>BFS from every single gate</li>
    </ul>
  </li>
  <li>space: O(om), where o is number of rows and m is number of columns
    <ul>
      <li>we are making use of a queue in BFS to explore the unvisited cells</li>
      <li>visited set</li>
    </ul>
  </li>
</ul>

<p><em>Leaving with a question: How can we optimize time complexity and make it O(om). I shall explore this in my next post</em></p>

  </div><a class="u-url" href="/code_challenges/bfs/optimal/2021/09/11/walls-gates.html" hidden></a>
</article>

      </div>
    </main><style type="text/css">
.div-content {
    background: linear-gradient(#B7E8EB,#fff);
}
</style>
<div class="div-content">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="100%" height="25vh" preserveAspectRatio="none" viewBox="0 0 1440 226"><g mask="url(&quot;#SvgjsMask1156&quot;)" fill="none"><path d="M1488 226L0 226 L0 80.26Q68.77 29.04, 120 97.81Q140.79 46.6, 192 67.39Q262.07 17.47, 312 87.54Q388.6 44.13, 432 120.73Q481.76 50.5, 552 100.26Q571.07 47.33, 624 66.4Q654.55 24.95, 696 55.51Q752.63 40.14, 768 96.77Q844.17 52.94, 888 129.11Q914.33 35.44, 1008 61.77Q1085.9 19.67, 1128 97.58Q1164.01 13.59, 1248 49.6Q1320.61 2.21, 1368 74.81Q1434.42 21.23, 1488 87.65z" fill="rgba(37, 70, 125, 1)"></path><path d="M1488 226L0 226 L0 139.63Q51.97 71.6, 120 123.57Q173.91 57.48, 240 111.39Q324.96 76.35, 360 161.31Q378.97 108.28, 432 127.25Q458.43 81.68, 504 108.11Q562.99 95.1, 576 154.09Q627.24 85.32, 696 136.56Q771.65 92.22, 816 167.87Q883.3 115.18, 936 182.48Q971.08 97.56, 1056 132.63Q1122.48 79.11, 1176 145.59Q1222.8 72.39, 1296 119.18Q1362.69 65.87, 1416 132.56Q1463.94 108.5, 1488 156.45z" fill="rgba(53, 108, 177, 1)"></path><path d="M1560 226L0 226 L0 207.84Q25.3 161.14, 72 186.45Q131.51 173.96, 144 233.48Q197.38 166.85, 264 220.23Q311.63 195.87, 336 243.5Q342.56 178.06, 408 184.61Q477.85 134.46, 528 204.31Q548.42 152.74, 600 173.16Q661.22 162.38, 672 223.6Q723.45 155.05, 792 206.5Q849.24 191.74, 864 248.98Q866.61 179.59, 936 182.2Q966.03 140.23, 1008 170.26Q1079.24 121.5, 1128 192.73Q1181.18 173.91, 1200 227.1Q1236.74 143.84, 1320 180.58Q1412.09 152.67, 1440 244.76Q1485.92 170.68, 1560 216.6z" fill="rgba(255, 255, 255, 1)"></path></g><defs><mask id="SvgjsMask1156"><rect width="1440" height="226" fill="#ffffff"></rect></mask></defs></svg>
</div>
<footer class="site-footer h-card">
  <data class="u-url" href="/code_challenges/%20/"></data>
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
<!--         <p class="feed-subscribe">
          <a href="/code_challenges/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/code_challenges/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p> -->
      </div>
      <div class="footer-col">
        <p>Keeping my coding skills sharp.</p>
      </div>
    </div>
    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/archanakalburgi" target="_blank" title="archanakalburgi"><svg class="svg-icon grey"><use xlink:href="/code_challenges/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/archanakalburgi" target="_blank" title="archanakalburgi"><svg class="svg-icon grey"><use xlink:href="/code_challenges/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>
  </div>

</footer>
</body>

</html>
